# Package `easy_algo` {#easy_algo}

<move-here src="#easy_algo-autogenerated"/>

## Motivation

The problem that this package solves is the need
to easily refer to the configuration of algorithms, and objects in general.

Here's one case: a node requires a line detector; a line detector
has a dozen parameters. Do we want to put a dozen parameters in the node?

Or, think about the case where there are different line detector classes.
Now, there must be a parameter in the node that tells which class to instantiate.

All of this business can be simplified by the features of EasyAlgo.

## Usage

The approach is to declare that there is a "family" of things, and to provide
the description of what those things are in YAML files.
These files can be anywhere in `catkin_ws`.

To declare the family of line detectors we create  a file
 `line_detector.easy_algo_family.yaml`,
with the following content:

```yaml
interface: line_detector.LineDetectorInterface
description: These are the line detectors.
```

This tells the system that there exists a family called `line_detector` (from the filename)
and that the objects in the family are instances of [line_detector.LineDetectorInterface](python:line_detector.LineDetectorInterface).

Then, we can write the configuration files that describe the particular instances.
These files have the pattern `![instance name].![family name].yaml`.

Continuing the example, suppose that there is a `line_detector.ConcreteLineDetector` with two parameters, `alpha` and `beta`.

Then we can define a `baseline` object by creating a file called `baseline.line_detector.yaml`,
containing the following:

    description: The baseline detector
    constructor: line_detector.ConcreteLineDetector
    parameters:
        alpha: 1.0
        beta: 1.0

Similarly, we can define an `experiment` object in a file called `experiment.line_detector.yaml`:

    description: My experiment with wild parameters
    constructor: line_detector.ConcreteLineDetector
    parameters:
        alpha: 2.0
        beta: 13.0

These configuration files are parsed by EasyAlgo.

## User interface

The user can see the list of family by using:

    $ rosrun easy_algo summary

To see the list of instances available for a family, use:

    $ rosrun easy_algo summary ![family name]


## The developer's point of view

From the developer's point of view, it is possibly
to access the code using the [`EasyAlgoDB` class](python:easy_algo.EasyAlgoDB).

Create an instance using [`get_easy_algo_db()`](python:easy_algo.get_easy_algo_db):

    from easy_algo import get_easy_algo_db

    algo_db = get_easy_algo_db()

Then create an instance like the following:

    line_detector_instance = algo_db.create_instance('line_detector', 'baseline')

It is also possible to query the database using the function `query`:

    # iterate over all possible line detectors
    available = algo_db.query('line_detector', '*'
    for name in available:
        line_detector = algo_db.create_instance('line_detector', name)
